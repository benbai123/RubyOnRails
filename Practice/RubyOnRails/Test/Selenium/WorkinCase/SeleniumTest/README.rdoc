== README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* ...


Please feel free to use a different markup language if you do not plan to run
<tt>rake doc:app</tt>.

== Jenkins Job Settings

* This build is parameterized

Parameter name
cases
Parameter type
String
Parameter desc
test case name, quoted with single quote, separated with comma
Parameter default
['simple_test']

Parameter name
browsers
Parameter type
String
Parameter desc
# usage:
# [{'url' => 'remote url', 'port' => 'port number', 'browser' => 'browser name', 'caps' => capabilities_hash}, ...]

# url: required, url of remote selnium server
# port: optional, default '4444'
# browser: optional, default 'firefox', also supports 'internet_explorer', 'chrome', 'opera'
# caps: optional, will override desired capabilities if provided

# e.g.
# [{'url' => '192.168.31.169'}]
# 
# [{'url' => '192.168.31.169'}, {'url' => '192.168.31.169', 'port' => '5555', 'browser' => 'opera'}]
# 
# [{'url' => '192.168.31.169','browser' => 'chrome'}, {'url' => '192.168.31.169', 'port' => '5555', 'browser' => 'opera'}]
# 
# [{'url' => '192.168.31.169','browser' => 'chrome', 'caps' => {'chromeOptions' => {'args' => ['--ignore-certificate-errors', '--disable-popup-blocking', '--disable-translate', '--test-type']}}}, {'url' => '192.168.31.169', 'browser' => 'internet_explorer'}]
Parameter default
[{'url' => '192.168.31.169'}, {'url' => '192.168.31.169', 'browser' => 'internet_explorer'}]

Parameter name
pageurl
Parameter type
String
Parameter desc
domain url including port of web server
Parameter default
http://192.168.31.169:8080

Parameter name
skipRealDiff
Parameter type
String
Parameter desc
whether skip diff process, just compare binary file (will be much faster)
any value will be faise except 'true'
Parameter default
true

* build step (Execute shell)
# go to folder of test rails app
cd /home/benbai/Things/data/github/RubyOnRails/Practice/RubyOnRails/Test/Selenium/WorkinCase/SeleniumTest

# run test case, all images of visual testing will be stored in test/visualTesting/Jenkins
failedmark=$BUILD_NUMBER skipRealDiff=$skipRealDiff task_filename=$BUILD_TAG runner="Jenkins" pageurl=$pageurl cases=$cases browsers=$browsers rake test:fileset

# chmod so other user can manage images created by jenkins
chmod -R 777 test/visualTesting/Jenkins

# mark build as failed if the file test/failed/$BUILD_NUMBER.txt exists
if [ -f test/failed/$BUILD_NUMBER.txt ]; then
    rm -rf test/failed/$BUILD_NUMBER.txt
    exit -1
fi